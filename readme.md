# SocialAPI

**SocialAPI** — это **pet-проект**, разработанный для демонстрации функционала социального API, в частности, простого чата с использованием **Go**, **Docker**, **PostgreSQL** и **Redis**. Проект включает в себя функциональность для работы с пользователями, друзьями, и другими элементами социальной сети.

## Полезные ссылки
<a href="https://www.postman.com/vennys/socialapi/overview" target="_blank">
  <img src="https://img.shields.io/badge/Postman-View-orange?style=for-the-badge&logo=postman" alt="View in Postman">
</a>

## Стек технологий

- **Go** — основной язык разработки backend-части.
- **Docker** — используется для контейнеризации приложения и его зависимостей.
- **PostgreSQL** — реляционная база данных для хранения данных приложения.
- **Redis** — используется для кэширования и ускорения работы приложения.
- **Chi** — минималистичный роутер для обработки HTTP-запросов.
- **Gorm** — ORM.
- **Zap** — логгер.

## Особенности

- Возможность работы с пользователями и их друзьями.
- Поддержка API-запросов для добавления и удаления друзей.
- Реализация основных операций с базой данных через PostgreSQL.
- Использование Redis для улучшения производительности.
- Контейнеризация с помощью Docker, что позволяет легко развернуть приложение в любой среде.

## Как запустить проект

1. Клонируйте репозиторий:

    ```bash
    git clone https://github.com/VennyS/socialAPI.git
    cd socialAPI
    ```

2. Создайте файл .env в корне проекта, заполнив его необходимыми переменными окружения:

    ```bash
    # App Configuration
    # -----------------------------------------
    # APP_ENV: Режим работы приложения. Возможные значения: "development", "production".
    # Стандартное значение: "development"
    APP_ENV="development"

    # ADDR: Адрес и порт, на котором приложение будет слушать запросы.
    # Стандартное значение: ":8080"
    ADDR=":8080"

    # ACCESS_TTL: Время жизни access токена (время, в течение которого токен действителен).
    # Стандартное значение: "15m" (15 минут)
    ACCESS_TTL="15m"

    # REFRESH_TTL: Время жизни refresh токена (время, в течение которого refresh токен действителен).
    # Стандартное значение: "720h" (720 часов или 30 дней)
    REFRESH_TTL="720h"

    # ACCESS_SECRET: Секретный ключ для подписи access токенов.
    # Стандартное значение: "supersecretaccess"
    ACCESS_SECRET="supersecretaccess"

    # ALLOWED_ORIGINS: Список разрешённых origin (источников), с которых могут поступать запросы.
    # Значения разделяются сепаратором, заданным переменной ORIGINS_SEPARATOR.
    # Стандартное значение: "http://localhost:8080"
    ALLOWED_ORIGINS="http://localhost:8080"

    # ORIGINS_SEPARATOR: Сепаратор для разделения значений в ALLOWED_ORIGINS.
    # Стандартное значение: ","
    ORIGINS_SEPARATOR=","

    # Database Configuration
    # -----------------------------------------
    # DB_HOST: Хост базы данных.
    # Стандартное значение: "localhost"
    DB_HOST=db

    # DB_PORT: Порт для подключения к базе данных.
    # Стандартное значение: "5432"
    DB_PORT=5432

    # DB_USER: Имя пользователя для подключения к базе данных.
    # Стандартное значение: "postgres"
    DB_USER=postgres

    # DB_PASSWORD: Пароль для подключения к базе данных.
    # Стандартное значение: "postgres"
    DB_PASSWORD=postgres

    # DB_NAME: Имя базы данных.
    # Стандартное значение: "socialdb"
    DB_NAME=socialdb

    # DB_SSLMODE: Режим SSL для подключения к базе данных.
    # Возможные значения: "disable", "require", "verify-ca", "verify-full".
    # Стандартное значение: "disable"
    DB_SSLMODE=disable

    # Redis Configuration
    # -----------------------------------------
    # REDIS_HOST: Хост Redis сервера.
    # Стандартное значение: "localhost"
    REDIS_HOST=redis

    # REDIS_PORT: Порт Redis сервера.
    # Стандартное значение: "6379"
    REDIS_PORT=6379

    # REDIS_PASSWORD: Пароль для подключения к Redis серверу.
    # Стандартное значение: пусто ("")
    REDIS_PASSWORD=

    # REDIS_DB: Номер базы данных в Redis.
    # Стандартное значение: 0
    REDIS_DB=0
    ```
    Сепаратор для ALLOWED_ORIGINS можно поменять, достаточно зайти [settings.go](./internal/setting/setting.go) и установить нужный в методе **`LoadConfig`**

3. Запустите проект через Docker

    ```bash
    docker-compose up --build
    ```
    или

    ```bash
    make build
    ```

    Это создаст контейнеры для приложения, базы данных и Redis.

4. Приложение будет доступно по адресу http://localhost:8080. (Стандартный порт 8080, берется из ENV)

## Структура проекта

### Проект состоит из следующих основных директорий:

* **`cmd/`** — точка входа в приложение.
* **`internal/api/`** — содержит код, связанный с API, включая маршруты и обработчики HTTP запросов. Здесь находятся все эндпоинты
* **`internal/lib/`** — утилиты и вспомогательные функции, которые могут быть использованы в различных частях проекта. В этой папке хранятся общие библиотеки, такие как обработчики ошибок, логирование и прочее.
* **`internal/setting/`** — директория для хранения конфигураций и настроек приложения. Здесь так же расположены функции для старта приложения.
* **`internal/storage`** — содержит всю работу с бд(и Redis, и Posgresql), включая инициализацию и миграции
* **`internal/shared`** — содержит некоторые компоненты, которые нужны в разных частях кода
* Кроме того, в директории проекта лежат файлы docker, Dockerfile и Makefile

### Кроме того, в корне проекта находятся:

- **`Dockerfile`** — файл сборки образа приложения.
- **`docker-compose.yml`** — описание сервисов для запуска в контейнерах (PostgreSQL, Redis, приложение).
- **`Makefile`** — упрощение часто используемых команд (например, запуск, сборка).

## Поддержка

Если у вас возникнут вопросы или предложения, не стесняйтесь создавать Issues или обращаться напрямую.

## Лицензия

Проект является pet-проектом и распространяется на условиях лицензии [MIT](./LICENSE).

## Описание:
- **Основная информация**: Описание проекта, технологий, которые ты используешь, и функционала.
- **Полезные ссылки**: Список полезных ссылок
- **Запуск проекта**: Шаги для клонирования репозитория и развертывания проекта с помощью Docker.
- **Структура проекта**: Информация о том, как структурирован код.
- **Поддержка**: Место, где можно задать вопросы или предложения.
- **Лицензия**: Указание, что проект является pet-проектом, и к нему применяется лицензия MIT.

Если нужно что-то еще добавить или изменить, дай знать!